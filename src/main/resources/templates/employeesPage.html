<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>List employee</title>

<style>
th, td {
	padding: 5px;
}
</style>

</head>

<body>
	<!-- Include _menu.html -->
	<th:block th:include="/_menu"></th:block>

	<h2>List Employee</h2>

	<table border="1">
		<tr>
			<th>ID</th>
			<th>Name</th>
			<th>Age</th>
			<th>Action</th>
		</tr>
		<tr th:each="emp : ${listEmployee}">
			<td th:utext="${emp.id}">..</td>
			<td th:utext="${emp.name}">..</td>
			<td th:utext="${emp.age}">..</td>
			<td>
				<a th:href="@{/{id}(id=${emp.id})}">View</a>
				<a href="#" th:with="url = @{/{id}(id=${emp.id})}" th:onclick="sendDelete([[${url}]])">Delete</a>
			</td>
		</tr>
	</table>
	<script th:inline="javascript">
		function sendDelete(url) {
			var xhttp = new XMLHttpRequest();
			xhttp.open("DELETE", url, true);
			xhttp.onload = function() {
				let responseURL = xhttp.responseURL;
				console.log("Redirecting to:", responseURL);
				window.location.replace(responseURL);
			};
			xhttp.send();
		}
	</script>
</body>
</html>